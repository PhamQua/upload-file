<div class="upload-contain">
    <label [for]="fileSelected ? '' : id" class="upload-label" [ngClass]="{'upload-label--error' : error}">
        <svg *ngIf="formControlName ? !control.value : !value" width="36" height="33" viewBox="0 0 36 33" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M32.4 3.6H26.694L24.462 1.17C24.1266 0.801708 23.718 0.507433 23.2624 0.305975C22.8068 0.104517 22.3142 0.000306485 21.816 0H14.184C13.176 0 12.204 0.432 11.52 1.17L9.306 3.6H3.6C1.62 3.6 0 5.22 0 7.2V28.8C0 30.78 1.62 32.4 3.6 32.4H32.4C34.38 32.4 36 30.78 36 28.8V7.2C36 5.22 34.38 3.6 32.4 3.6ZM18 27C13.032 27 9 22.968 9 18C9 13.032 13.032 9 18 9C22.968 9 27 13.032 27 18C27 22.968 22.968 27 18 27Z" fill="#9DB4BE"/>
        </svg>
        <img *ngIf="fileSelected" [src]="fileSelected" alt="" >
        <div class="group-button" [ngClass]="{'group-button--show': formControlName ? control.value : !!value}">
            <button type="button" (click)="onPreview()">
                <svg viewBox="64 64 896 896" focusable="false" data-icon="eye" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"></path></svg>
            </button>
            <button type="button" (click)="onRemove(id)">
                <svg viewBox="64 64 896 896" focusable="false" data-icon="delete" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"></path></svg>             
            </button>
        </div>
        <!-- <div class="item-progress" *ngIf="isReading">
            <div class="progress-outer">
                <div class="progress-inner">
                    <div class="progress-bg" [ngStyle]="{ width: progress + '%' }"></div>
                </div> 
                </div>
        </div> -->
    </label>
    <ng-container *ngIf="formControlName else ngModel">
    <input [id]="id" type="file" (change)="onUpload($event)" accept="image/*" [formControl]="control" />
    </ng-container>
    <ng-template #ngModel>
        <input [id]="id" type="file" (change)="onInputChange($event)" accept="image/*" />
    </ng-template>
</div>
<div #previewModal class="file-modal">
    <div class="file-modal-content">
      <div class="file-modal-header">
        <span class="close" (click)="onClose()">&times;</span>
        <div class="file-modal-header-title">{{fileName}}</div>
      </div>
      <div class="file-modal-body">
        <img [src]="fileSelected" alt="">
      </div>
    </div>
</div>
  